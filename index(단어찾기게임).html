<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ë‹¤ë¥¸ ë‹¨ì–´ ì°¾ê¸°</title>
<style>
  body {
    text-align: center;
    background-color: #fff8f0;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    color: black;
    font-family: 'ë§‘ì€ ê³ ë”•', 'Malgun Gothic', sans-serif;
  }
  #intro {
    font-size: 24px;
    margin-bottom: 20px;
    line-height: 1.6;
  }
  #startBtn {
    padding: 15px 30px;
    font-size: 20px;
    border: none;
    border-radius: 15px;
    background-color: #87CEEB;
    color: black;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(135,206,235,0.6);
    transition: background-color 0.3s, transform 0.2s;
  }
  #startBtn:hover {
    background-color: #a0d8ef;
    transform: scale(1.05);
  }
  #gameArea {
    display: none;
    flex-direction: column;
    align-items: center;
    padding-top: 10px;
  }
  h2, #timer {
    margin: 0;
    padding: 2px 0;
    color: black;
  }

  /* ê°„ê²©ì„ ì¡°ê¸ˆ ë” ì´˜ì´˜í•˜ê²Œ */
  #grid {
    display: grid;
    gap: 6px;                 /* ê¸°ì¡´ 8px â†’ 6px */
    justify-items: center;
    align-items: center;
    margin-top: 8px;          /* ê¸°ì¡´ 10px â†’ 8px */
    width: 100%;
    max-width: 480px;
  }

  /* 1~5ë‹¨ê³„: ì •ì‚¬ê°í˜• ë°°ì¹˜ */
  #grid.square {
    grid-template-columns: repeat(auto-fit, 70px);
    grid-auto-rows: 70px;
    width: auto;
    max-width: none;
  }

  /* 6Â·7ë‹¨ê³„: ì„¸ë¡œë¡œ ê¸´ ì§ì‚¬ê°í˜• ë°°ì¹˜ */
  #grid.rectangle {
    grid-template-columns: repeat(5, 1fr);  /* 5ì—´ */
    grid-template-rows: repeat(8, 1fr);     /* 8í–‰ â†’ ì„¸ë¡œí˜• */
    max-width: 360px;                       /* í™”ë©´ì´ ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šê²Œ */
  }

  button.wordBtn {
    font-weight: bold;
    border-radius: 12px;
    border: none;
    color: black;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.15s, background-color 0.3s;
    user-select: none;
  }

  /* 1~5ë‹¨ê³„ ë²„íŠ¼(ì •ì‚¬ê°í˜•) */
  button.wordBtn.square {
    width: 70px;
    height: 70px;
    font-size: 16px;
    background-color: #87CEEB;
  }
  button.wordBtn.square:hover {
    transform: scale(1.08);
    background-color: #a0d8ef;
  }

  /* 6Â·7ë‹¨ê³„ ê¸°ë³¸ ë²„íŠ¼(ì§ì‚¬ê°í˜•, ì„¸ë¡œ ëŠë‚Œ) */
  button.wordBtn.rectangle {
    width: 46px;
    height: 60px;
    font-size: 14px;
    background-color: #87CEEB;
  }
  button.wordBtn.rectangle:hover {
    transform: scale(1.06);
    background-color: #a0d8ef;
  }

  /* â¬‡ï¸ 6ë‹¨ê³„ ì „ìš©: ë‘ ê¸€ì í¬ê¸°(ì •ì‚¬ê°í˜•ì— ê°€ê¹ê²Œ) */
  button.wordBtn.rectangle.twoChar {
    width: 60px;
    height: 60px;
    font-size: 18px;
  }

  button.wordBtn:focus {
    outline: none;
  }

  @media (max-width: 480px) {
    /* ëª¨ë°”ì¼ì—ì„œ ê°„ê²©ì„ ë” ì¤„ì„ */
    #grid { gap: 4px; }

    button.wordBtn.square {
      width: 50px;
      height: 50px;
      font-size: 14px;
    }

    button.wordBtn.rectangle {
      width: 38px;
      height: 54px;
      font-size: 12px;
    }

    /* 6ë‹¨ê³„ ì „ìš© ë‘ ê¸€ì í¬ê¸°(ëª¨ë°”ì¼) */
    button.wordBtn.rectangle.twoChar {
      width: 48px;
      height: 48px;
      font-size: 16px;
    }

    #startBtn {
      font-size: 18px;
      padding: 12px 24px;
    }

    #grid.rectangle {
      max-width: 300px; /* ì„¸ë¡œ ë¹„ìœ¨ ìœ ì§€ */
    }
  }
</style>
</head>
<body>

<div id="intro">
  <div>íœ˜ê²½ìŒ¤ê³¼ í•¨ê»˜í•˜ëŠ” 2í•™ê¸° ìˆ˜ì—…</div> 
  <div style="font-size:28px; font-weight:bold; margin: 10px 0;">ê²Œì„ìœ¼ë¡œ ì•Œì•„ë³´ê¸°! ë‘ë‘¥</div>
  <button id="startBtn">ê²Œì„ ì‹œì‘</button>
</div>

<div id="gameArea">
  <h2 id="stage">1ë‹¨ê³„</h2>
  <div id="timer">ì‹œê°„: 5</div>
  <div id="grid" class="square"></div>
</div>

<script>
(() => {
  const chosenFont = "'ë§‘ì€ ê³ ë”•', 'Malgun Gothic', sans-serif";
  document.body.style.fontFamily = chosenFont;

  const wordPairs = [
    { correct: "íœ˜ê²½", wrong: "íœ˜ê²…" },
    { correct: "í­ë ¥", wrong: "í­ë ´" },
    { correct: "ìƒëª…", wrong: "ìƒˆë©°" },
    { correct: "ì§„ë¡œ", wrong: "ì§„ë£Œ" },
    { correct: "ë¯¸ë””ì–´", wrong: "ë¯¸ë¯¸ì–´" },
    { correct: "ì§‘", wrong: "ì§•" },
    { correct: "SNS", wrong: "SES" }
  ];

  const intro = document.getElementById("intro");
  const startBtn = document.getElementById("startBtn");
  const gameArea = document.getElementById("gameArea");
  const stageTitle = document.getElementById("stage");
  const timerDisplay = document.getElementById("timer");
  const grid = document.getElementById("grid");

  let stage = 1;
  let timeLeft = 5;
  let timer = null;

  function animateButtons() {
    const buttons = grid.querySelectorAll("button");
    buttons.forEach(btn => {
      btn.style.transition = "transform 0.2s";
      btn.style.transform = "scale(1.2)";
      setTimeout(() => {
        btn.style.transform = "scale(1)";
      }, 200);
    });
  }

  function showMessage(msg) {
    alert(msg);
  }

  function startStage() {
    if (stage > wordPairs.length) {
      intro.style.display = "block";
      gameArea.style.display = "none";
      intro.innerHTML = `
        <div style="font-size:28px; font-weight:bold; color:black; margin-bottom:20px;">
          ë‹¹ì‹ ì´ ì§„ì •í•œ ê¸°ê°€ì™•! ğŸ‰
        </div>
        <button id="restartBtn" style="padding: 15px 30px; font-size: 20px; border: none; border-radius: 15px; background-color: #87CEEB; color: black; cursor: pointer; box-shadow: 0 4px 8px rgba(135,206,235,0.6);">
          ë‹¤ì‹œ ì‹œì‘í•˜ê¸°
        </button>
      `;
      document.getElementById("restartBtn").onclick = () => {
        stage = 1;
        timeLeft = 5;
        intro.innerHTML = `
          <div>íœ˜ê²½ìŒ¤ê³¼ í•¨ê»˜í•˜ëŠ” 2í•™ê¸° ìˆ˜ì—…</div> 
          <div style="font-size:28px; font-weight:bold; margin: 10px 0;">ê²Œì„ìœ¼ë¡œ ì•Œì•„ë³´ê¸°! ë‘ë‘¥</div>
          <button id="startBtn">ê²Œì„ ì‹œì‘</button>
        `;
        document.body.style.fontFamily = chosenFont;
        document.getElementById("startBtn").onclick = () => {
          intro.style.display = "none";
          gameArea.style.display = "flex";
          startStage();
        };
      };
      return;
    }

    stageTitle.textContent = stage + "ë‹¨ê³„";
    timeLeft = 5;
    timerDisplay.textContent = "ì‹œê°„: " + timeLeft;

    grid.innerHTML = "";

    if (stage <= 5) {
      const size = 2 + stage - 1;         // 2x2 â†’ 6x6
      grid.classList.remove("rectangle");
      grid.classList.add("square");
      grid.style.gridTemplateColumns = `repeat(${size}, auto)`;
      grid.style.gridAutoRows = `70px`;

      const totalButtons = size * size;
      const { correct, wrong } = wordPairs[stage - 1];
      const correctIndex = Math.floor(Math.random() * totalButtons);

      for (let i = 0; i < totalButtons; i++) {
        const btn = document.createElement("button");
        btn.className = "wordBtn square";
        btn.textContent = (i === correctIndex) ? correct : wrong;

        btn.onclick = () => {
          btn.blur();
          if (i === correctIndex) {
            clearInterval(timer);
            animateButtons();
            setTimeout(() => {
              stage++;
              startStage();
            }, 300);
          } else {
            showMessage("âŒ í‹€ë ¸ìŠµë‹ˆë‹¤!");
          }
        };

        grid.appendChild(btn);
      }

    } else {
      // 6Â·7ë‹¨ê³„: ì„¸ë¡œí˜• ë ˆì´ì•„ì›ƒ
      grid.classList.remove("square");
      grid.classList.add("rectangle");
      grid.style.gridTemplateColumns = `repeat(5, 1fr)`;
      grid.style.gridTemplateRows = `repeat(8, 1fr)`;

      const totalButtons = 40; // 5 x 8
      const { correct, wrong } = wordPairs[stage - 1];
      const correctIndex = Math.floor(Math.random() * totalButtons);

      for (let i = 0; i < totalButtons; i++) {
        const btn = document.createElement("button");
        // 6ë‹¨ê³„ë§Œ ë‘ ê¸€ì ê¸°ì¤€ í¬ê¸°(twoChar) ì ìš©
        btn.className = (stage === 6)
          ? "wordBtn rectangle twoChar"
          : "wordBtn rectangle";

        btn.textContent = (i === correctIndex) ? correct : wrong;

        btn.onclick = () => {
          btn.blur();
          if (i === correctIndex) {
            clearInterval(timer);
            animateButtons();
            setTimeout(() => {
              stage++;
              startStage();
            }, 300);
          } else {
            showMessage("âŒ í‹€ë ¸ìŠµë‹ˆë‹¤!");
          }
        };

        grid.appendChild(btn);
      }
    }

    clearInterval(timer);
    timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = "ì‹œê°„: " + timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        if (confirm("â° ì‹œê°„ ì´ˆê³¼! ë‹¤ì‹œ ë„ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          stage = 1;
          startStage();
        } else {
          intro.style.display = "block";
          gameArea.style.display = "none";
        }
      }
    }, 1000);
  }

  startBtn.onclick = () => {
    intro.style.display = "none";
    gameArea.style.display = "flex";
    stage = 1;
    timeLeft = 5;
    startStage();
  };
})();
</script>

</body>
</html>
