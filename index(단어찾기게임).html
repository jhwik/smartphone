<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>다른 단어 찾기</title>
<style>
  body {
    text-align: center;
    background-color: #fff8f0;
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    color: black;
    font-family: '맑은 고딕', 'Malgun Gothic', sans-serif;
  }
  #intro {
    font-size: 24px;
    margin-bottom: 20px;
    line-height: 1.6;
  }
  #startBtn {
    padding: 15px 30px;
    font-size: 20px;
    border: none;
    border-radius: 15px;
    background-color: #87CEEB;
    color: black;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(135,206,235,0.6);
    transition: background-color 0.3s, transform 0.2s;
  }
  #startBtn:hover {
    background-color: #a0d8ef;
    transform: scale(1.05);
  }
  #gameArea {
    display: none;
    flex-direction: column;
    align-items: center;
    padding-top: 10px;
  }
  h2, #timer {
    margin: 0;
    padding: 2px 0;
    color: black;
  }

  /* 간격을 조금 더 촘촘하게 */
  #grid {
    display: grid;
    gap: 6px;                 /* 기존 8px → 6px */
    justify-items: center;
    align-items: center;
    margin-top: 8px;          /* 기존 10px → 8px */
    width: 100%;
    max-width: 480px;
  }

  /* 1~5단계: 정사각형 배치 */
  #grid.square {
    grid-template-columns: repeat(auto-fit, 70px);
    grid-auto-rows: 70px;
    width: auto;
    max-width: none;
  }

  /* 6·7단계: 세로로 긴 직사각형 배치 */
  #grid.rectangle {
    grid-template-columns: repeat(5, 1fr);  /* 5열 */
    grid-template-rows: repeat(8, 1fr);     /* 8행 → 세로형 */
    max-width: 360px;                       /* 화면이 너무 넓어지지 않게 */
  }

  button.wordBtn {
    font-weight: bold;
    border-radius: 12px;
    border: none;
    color: black;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.15s, background-color 0.3s;
    user-select: none;
  }

  /* 1~5단계 버튼(정사각형) */
  button.wordBtn.square {
    width: 70px;
    height: 70px;
    font-size: 16px;
    background-color: #87CEEB;
  }
  button.wordBtn.square:hover {
    transform: scale(1.08);
    background-color: #a0d8ef;
  }

  /* 6·7단계 기본 버튼(직사각형, 세로 느낌) */
  button.wordBtn.rectangle {
    width: 46px;
    height: 60px;
    font-size: 14px;
    background-color: #87CEEB;
  }
  button.wordBtn.rectangle:hover {
    transform: scale(1.06);
    background-color: #a0d8ef;
  }

  /* ⬇️ 6단계 전용: 두 글자 크기(정사각형에 가깝게) */
  button.wordBtn.rectangle.twoChar {
    width: 60px;
    height: 60px;
    font-size: 18px;
  }

  button.wordBtn:focus {
    outline: none;
  }

  @media (max-width: 480px) {
    /* 모바일에서 간격을 더 줄임 */
    #grid { gap: 4px; }

    button.wordBtn.square {
      width: 50px;
      height: 50px;
      font-size: 14px;
    }

    button.wordBtn.rectangle {
      width: 38px;
      height: 54px;
      font-size: 12px;
    }

    /* 6단계 전용 두 글자 크기(모바일) */
    button.wordBtn.rectangle.twoChar {
      width: 48px;
      height: 48px;
      font-size: 16px;
    }

    #startBtn {
      font-size: 18px;
      padding: 12px 24px;
    }

    #grid.rectangle {
      max-width: 300px; /* 세로 비율 유지 */
    }
  }
</style>
</head>
<body>

<div id="intro">
  <div>휘경쌤과 함께하는 2학기 수업</div> 
  <div style="font-size:28px; font-weight:bold; margin: 10px 0;">게임으로 알아보기! 두둥</div>
  <button id="startBtn">게임 시작</button>
</div>

<div id="gameArea">
  <h2 id="stage">1단계</h2>
  <div id="timer">시간: 5</div>
  <div id="grid" class="square"></div>
</div>

<script>
(() => {
  const chosenFont = "'맑은 고딕', 'Malgun Gothic', sans-serif";
  document.body.style.fontFamily = chosenFont;

  const wordPairs = [
    { correct: "휘경", wrong: "휘겅" },
    { correct: "폭력", wrong: "폭렴" },
    { correct: "생명", wrong: "새며" },
    { correct: "진로", wrong: "진료" },
    { correct: "미디어", wrong: "미미어" },
    { correct: "집", wrong: "징" },
    { correct: "SNS", wrong: "SES" }
  ];

  const intro = document.getElementById("intro");
  const startBtn = document.getElementById("startBtn");
  const gameArea = document.getElementById("gameArea");
  const stageTitle = document.getElementById("stage");
  const timerDisplay = document.getElementById("timer");
  const grid = document.getElementById("grid");

  let stage = 1;
  let timeLeft = 5;
  let timer = null;

  function animateButtons() {
    const buttons = grid.querySelectorAll("button");
    buttons.forEach(btn => {
      btn.style.transition = "transform 0.2s";
      btn.style.transform = "scale(1.2)";
      setTimeout(() => {
        btn.style.transform = "scale(1)";
      }, 200);
    });
  }

  function showMessage(msg) {
    alert(msg);
  }

  function startStage() {
    if (stage > wordPairs.length) {
      intro.style.display = "block";
      gameArea.style.display = "none";
      intro.innerHTML = `
        <div style="font-size:28px; font-weight:bold; color:black; margin-bottom:20px;">
          당신이 진정한 기가왕! 🎉
        </div>
        <button id="restartBtn" style="padding: 15px 30px; font-size: 20px; border: none; border-radius: 15px; background-color: #87CEEB; color: black; cursor: pointer; box-shadow: 0 4px 8px rgba(135,206,235,0.6);">
          다시 시작하기
        </button>
      `;
      document.getElementById("restartBtn").onclick = () => {
        stage = 1;
        timeLeft = 5;
        intro.innerHTML = `
          <div>휘경쌤과 함께하는 2학기 수업</div> 
          <div style="font-size:28px; font-weight:bold; margin: 10px 0;">게임으로 알아보기! 두둥</div>
          <button id="startBtn">게임 시작</button>
        `;
        document.body.style.fontFamily = chosenFont;
        document.getElementById("startBtn").onclick = () => {
          intro.style.display = "none";
          gameArea.style.display = "flex";
          startStage();
        };
      };
      return;
    }

    stageTitle.textContent = stage + "단계";
    timeLeft = 5;
    timerDisplay.textContent = "시간: " + timeLeft;

    grid.innerHTML = "";

    if (stage <= 5) {
      const size = 2 + stage - 1;         // 2x2 → 6x6
      grid.classList.remove("rectangle");
      grid.classList.add("square");
      grid.style.gridTemplateColumns = `repeat(${size}, auto)`;
      grid.style.gridAutoRows = `70px`;

      const totalButtons = size * size;
      const { correct, wrong } = wordPairs[stage - 1];
      const correctIndex = Math.floor(Math.random() * totalButtons);

      for (let i = 0; i < totalButtons; i++) {
        const btn = document.createElement("button");
        btn.className = "wordBtn square";
        btn.textContent = (i === correctIndex) ? correct : wrong;

        btn.onclick = () => {
          btn.blur();
          if (i === correctIndex) {
            clearInterval(timer);
            animateButtons();
            setTimeout(() => {
              stage++;
              startStage();
            }, 300);
          } else {
            showMessage("❌ 틀렸습니다!");
          }
        };

        grid.appendChild(btn);
      }

    } else {
      // 6·7단계: 세로형 레이아웃
      grid.classList.remove("square");
      grid.classList.add("rectangle");
      grid.style.gridTemplateColumns = `repeat(5, 1fr)`;
      grid.style.gridTemplateRows = `repeat(8, 1fr)`;

      const totalButtons = 40; // 5 x 8
      const { correct, wrong } = wordPairs[stage - 1];
      const correctIndex = Math.floor(Math.random() * totalButtons);

      for (let i = 0; i < totalButtons; i++) {
        const btn = document.createElement("button");
        // 6단계만 두 글자 기준 크기(twoChar) 적용
        btn.className = (stage === 6)
          ? "wordBtn rectangle twoChar"
          : "wordBtn rectangle";

        btn.textContent = (i === correctIndex) ? correct : wrong;

        btn.onclick = () => {
          btn.blur();
          if (i === correctIndex) {
            clearInterval(timer);
            animateButtons();
            setTimeout(() => {
              stage++;
              startStage();
            }, 300);
          } else {
            showMessage("❌ 틀렸습니다!");
          }
        };

        grid.appendChild(btn);
      }
    }

    clearInterval(timer);
    timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = "시간: " + timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        if (confirm("⏰ 시간 초과! 다시 도전하시겠습니까?")) {
          stage = 1;
          startStage();
        } else {
          intro.style.display = "block";
          gameArea.style.display = "none";
        }
      }
    }, 1000);
  }

  startBtn.onclick = () => {
    intro.style.display = "none";
    gameArea.style.display = "flex";
    stage = 1;
    timeLeft = 5;
    startStage();
  };
})();
</script>

</body>
</html>
